# üìÖ Daily Log - 04-08-2025

## üéØ Today's Focus

*Today's goal was to learn how to connect MongoDB and Mongoose to a Node.Js application.
To perform CRUD operation like read/write*

## ‚úÖ What I Accomplished
-   [x] Create a Database Instance on MongoDb
-   [x] Define Schemas/ Model for User , Integrated with JWT exercise from last day, made production grade integrity with password validation
-   [x] Refactored project structure for better experience
-   [x] Learned how to fetch data/ perform CRUD operations in mongodb
-   [x] Password hashing with > bcrypt

## üß† What I Learned

> _Today I learned how to use mongodb database, crud operations on it and how to use bcrypt to make the passwords secured as a hashed password_

## Technical Learnings
-   **Mongodb**: mongodb is the most widely used database perhaps used in development
-   **Bcrypt**: Hashing user passwords with bcrypt before storing them in the database and using bcrypt.compare to verify them during login.
-   **Database Integration**: Refactoring routes to perform asynchronous CRUD (Create, Read) operations using Mongoose models (User.create, User.findOne).

## Process Improvements
-   **Insight**: It helped me increase my learning so far by introducing the concepts of databases in backend development. I learnt CRUD operations and how to make use of crud operations in Mongodb like .create() and .findOne()/ findAll()
-   **Insight**: Bcrypt uses hashing which allows to store data as hashed values, I learned how to use it for industry level storing of password and important details

## üöß Challenges & Blockers

_Refactoring the folders and rewriting the imports made me frustrated_

## üîç Code Snippets & Solutions

**models/User.js**
```JavaScript
const mongoose = require('mongoose');
const { Schema } = mongoose;
const userSchema = new Schema({
¬† ¬† username: {
¬† ¬† ¬† ¬† type: String,
¬† ¬† ¬† ¬† required: true,
¬† ¬† ¬† ¬† unique: true,
¬† ¬† ¬† ¬† trim: true
¬† ¬† },
¬† ¬† email: {
¬† ¬† ¬† ¬† type: String,
¬† ¬† ¬† ¬† required: true,
¬† ¬† ¬† ¬† unique: true
¬† ¬† },
¬† ¬† password: { 
¬† ¬† ¬† ¬† type: String,
¬† ¬† ¬† ¬† required: true,
¬† ¬† ¬† ¬† minlength: 8,
¬† ¬† ¬† ¬† trim: true
¬† ¬† },
¬† ¬† createdAt: {
¬† ¬† ¬† ¬† type: Date,
¬† ¬† ¬† ¬† default: Date.now
¬† ¬† }
});

const User = mongoose.model('User', userSchema);
module.exports = User;
```
**server.js**

```Javascript
try {
¬† ¬† ¬† ¬† const user = await User.findOne({ email: email });

¬† ¬† ¬† ¬† if (!user) {
¬† ¬† ¬† ¬† ¬† ¬† return res.status(401).json({ error: "Invalid credentials." }); // Unauthorized
¬† ¬† ¬† ¬† }
¬† ¬† ¬† ¬† const isMatch = await bcrypt.compare(password, user.password);
¬† ¬† ¬† ¬† if (!isMatch) {
¬† ¬† ¬† ¬† ¬† ¬† return res.status(401).json({ error: 'Invalid credentials' });
¬† ¬† ¬† ¬† }
 ¬† ¬† // User is valid, create the JWT
¬† ¬† ¬† ¬† const userPayload = {
¬† ¬† ¬† ¬† ¬† ¬† id: user._id,
¬† ¬† ¬† ¬† ¬† ¬† name: user.username,
¬† ¬† ¬† ¬† ¬† ¬† isAdmin: user.username === "admin", // Keep  logic
¬† ¬† ¬† ¬† };
¬† ¬† ¬† ¬† const token = jwt.sign(userPayload, JWT_SECRET, { expiresIn: "1h" });
¬† ¬† ¬† ¬† res.json({ token });
¬† ¬† } catch (error) {
¬† ¬† ¬† ¬† res.status(500).json({ error: "Server error during login." });
¬† ¬† }
```
## üéØ Tomorrow's Plan
_What will you focus on tomorrow?_

-   [ ] Real-time Features and Production Deployment
  

## üí≠ Reflection

> Feels good to have learnt mongodb and to have made use of crud operations, looking forward to learning more stuff

---

**Time Spent**: 2 hours  
**Energy Level**: ‚≠ê‚≠ê‚≠ê (1-5)  
**Satisfaction**: ‚≠ê‚≠ê‚≠ê‚≠ê (1-5)
